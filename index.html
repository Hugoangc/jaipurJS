<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta name="theme-color" content="#d2b48c" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tropeiro de Minas</title>
    <link rel="manifest" href="public/manifest.json" />

    <link rel="stylesheet" href="src/styles/base.css" />
    <link rel="stylesheet" href="src/styles/layout.css" />
    <link rel="stylesheet" href="src/styles/card.css" />
    <link rel="stylesheet" href="src/styles/components.css" />
    <link rel="stylesheet" href="src/styles/tutorial.css" />
    <link rel="stylesheet" href="src/styles/responsive.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="modal-dificuldade" class="modal-overlay">
      <div class="modal-content">
        <h2>Escolha a Dificuldade</h2>

        <div class="difficulty-slider-container">
          <div class="difficulty-display">
            <div id="difficulty-name" class="difficulty-name">Tutorial</div>
            <div id="difficulty-description" class="difficulty-description">
              Aprenda as mec√¢nicas do jogo com orienta√ß√£o passo a passo
            </div>
          </div>

          <div class="slider-wrapper">
            <input
              type="range"
              min="0"
              max="4"
              value="0"
              class="difficulty-slider"
              id="difficulty-slider"
            />

            <div class="difficulty-markers">
              <span class="marker active" data-level="0">Tutorial</span>
              <span class="marker" data-level="1">Iniciante</span>
              <span class="marker" data-level="2">Moderado</span>
              <span class="marker" data-level="3">Dif√≠cil</span>
              <span class="marker" data-level="4">Extremo</span>
            </div>
          </div>
        </div>

        <button id="start-game-btn" class="start-button tutorial-mode">
          Iniciar Tutorial
        </button>
      </div>
    </div>

    <div id="tutorial-overlay" class="tutorial-overlay">
      <div id="tutorial-spotlight" class="tutorial-spotlight"></div>
    </div>
    <div id="tutorial-tooltip" class="tutorial-tooltip" style="display: none">
      <h3 id="tutorial-title">T√≠tulo</h3>
      <p id="tutorial-text">Texto do tutorial</p>
      <div class="tutorial-buttons">
        <button class="tutorial-btn tutorial-btn-skip" id="tutorial-skip">
          Pular Tutorial
        </button>
        <button class="tutorial-btn tutorial-btn-next" id="tutorial-next">
          Pr√≥ximo
        </button>
      </div>
    </div>
    <div id="tutorial-progress" class="tutorial-progress">
      <div class="tutorial-dots" id="tutorial-dots"></div>
    </div>
    <div id="tutorial-mode-indicator" class="tutorial-mode-indicator">
      üéì Modo Tutorial
    </div>

    <div id="game-container" style="display: none">
      <header>
        <h1>Tropeiro</h1>
        <a
          id="github-link"
          href="https://github.com/hugoangc"
          target="_blank"
          rel="noopener noreferrer"
          title="Ver c√≥digo no GitHub"
        >
          <img
            src="public/images/github.png"
            alt="√çcone do GitHub"
            width="24"
            height="24"
          />
          <span>Hugo Angelis</span>
        </a>
        <button id="btn-regras" class="info-button">i</button>
        <div id="game-info">
          <p>Placar (MD3): <span id="placar-md3">0 a 0</span></p>

          <p>Turno: <span id="turno-atual">1</span></p>
          <p>Cartas no Baralho: <span id="cartas-baralho">55</span></p>
          <div
            id="difficulty-display-header"
            title="Clique para alterar a dificuldade"
          >
            <p>Dificuldade: <span id="dificuldade-jogo">-</span></p>
          </div>
        </div>
        <div id="header-actions">
          <button id="btn-reiniciar">‚Üª Reiniciar Jogo</button>
          <button id="btn-desistir">Desistir da Rodada</button>
        </div>
      </header>

      <div id="modal-regras" class="modal-overlay" style="display: none">
        <div class="modal-content">
          <h2>Regras e Objetivo do Jogo</h2>
          <div class="regras-texto">
            <div id="regras-resumidas">
              <h4>Objetivo</h4>
              <p>
                Seja o tropeiro mais rico de Minas! O primeiro jogador a
                conquistar <strong>2 Selos de Excel√™ncia</strong> vence o jogo.
                Voc√™ ganha um selo ao vencer uma rodada.
              </p>

              <h4>No seu turno, escolha UMA a√ß√£o:</h4>
              <ul>
                <li>
                  <strong>Pegar Cartas:</strong>
                  <ul>
                    <li>
                      Pegue <strong>1 √∫nica carta</strong> de produto do
                      mercado.
                    </li>
                    <li>Pegue <strong>TODAS as vacas</strong> do mercado.</li>
                    <li>
                      <strong>Troque 2 ou mais cartas</strong> da sua m√£o/suas
                      vacas por cartas do mercado.
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>Vender Cartas:</strong>
                  <ul>
                    <li>
                      Venda <strong>1 ou mais cartas do mesmo tipo</strong> da
                      sua m√£o para coletar fichas de pontos.
                    </li>
                    <li>Vendas de 3, 4 ou 5 cartas rendem fichas de b√¥nus!</li>
                    <li>
                      Produtos de luxo (üí∞ Ouro, ü´ò Caf√©, üßÄ Queijo) exigem uma
                      venda m√≠nima de 2 cartas.
                    </li>
                  </ul>
                </li>
              </ul>

              <h4>Fim da Rodada</h4>
              <p>
                A rodada termina quando o baralho de compras se esgota ou quando
                3 pilhas de fichas de produtos acabam. O jogador com mais vacas
                ganha um b√¥nus de 5 pontos!
              </p>
            </div>

            <div id="regras-detalhadas">
              <h3>Objetivo do Jogo üèÜ</h3>
              <p>
                O grande vencedor √© o primeiro jogador a conquistar
                <strong>2 Selos de Excel√™ncia</strong>. Para conseguir um selo,
                voc√™ precisa <strong>vencer uma rodada</strong> acumulando mais
                pontos que seu oponente.
              </p>

              <h3>Prepara√ß√£o da Rodada</h3>
              <p>
                No in√≠cio de cada rodada, cada jogador recebe 5 cartas na m√£o. O
                "Mercado" √© aberto com 5 cartas viradas para cima. O restante
                das cartas forma o baralho de compras.
              </p>

              <h3>No seu Turno: Escolha UMA A√ß√£o</h3>
              <p>
                Em cada turno, voc√™ deve escolher e realizar
                <strong>apenas uma</strong> das seguintes a√ß√µes. Pense bem, pois
                cada escolha pode te aproximar da vit√≥ria!
              </p>

              <hr />

              <h4>A√á√ÉO: PEGAR CARTAS</h4>
              <p>
                Voc√™ pode aumentar os recursos na sua m√£o de tr√™s maneiras
                diferentes:
              </p>
              <ul>
                <li>
                  <strong>Op√ß√£o 1: Comprar um Produto (A√ß√£o Simples)</strong
                  ><br />
                  Pegue <strong>1 √∫nica carta</strong> de produto do Mercado
                  (qualquer carta que n√£o seja uma Vaca). O espa√ßo vazio ser√°
                  imediatamente preenchido por uma nova carta do baralho. <br />
                  <em
                    >Dica: Ideal para pegar uma carta valiosa que voc√™
                    precisa!</em
                  >
                </li>
                <li>
                  <strong>Op√ß√£o 2: Levar o Rebanho (Pegar as Vacas)</strong
                  ><br />
                  Pegue <strong>TODAS</strong> as cartas de
                  <strong>Vaca</strong> (üêÑ) que estiverem no Mercado. Os
                  espa√ßos vazios ser√£o preenchidos com novas cartas do
                  baralho.<br />
                  <em
                    >Dica: Vacas s√£o a "moeda" para trocas e d√£o um b√¥nus no
                    final da rodada.</em
                  >
                </li>
                <li>
                  <strong>Op√ß√£o 3: Fazer uma Troca (A√ß√£o Avan√ßada)</strong
                  ><br />
                  Troque 2 ou mais cartas com o Mercado. O n√∫mero de cartas que
                  voc√™ d√° deve ser <strong>exatamente igual</strong> ao n√∫mero
                  de cartas que voc√™ pega. Voc√™ pode entregar cartas da sua m√£o,
                  Vacas do seu rebanho, ou uma combina√ß√£o.<br />
                  <em
                    >Dica: A melhor forma de transformar suas Vacas e cartas de
                    baixo valor em produtos de luxo!</em
                  >
                </li>
              </ul>

              <hr />

              <h4>A√á√ÉO: VENDER PRODUTOS</h4>
              <p>
                Esta √© a principal forma de marcar pontos. Venda um conjunto de
                cartas do mesmo produto da sua m√£o para coletar fichas de
                pontos. As fichas mais valiosas de cada produto acabam primeiro!
              </p>
              <ul>
                <li>
                  <strong>Regra de Venda M√≠nima:</strong> Produtos de luxo (üí∞
                  Ouro, ü´ò Caf√©, üßÄ Queijo) exigem uma venda m√≠nima de
                  <strong>2 cartas</strong>.
                </li>
                <li>
                  <strong>Mec√¢nica de B√¥nus:</strong> Vender 3, 4 ou 5+ cartas
                  de uma vez rende fichas de b√¥nus extras e valiosas. Planejar
                  grandes vendas √© a chave para a vit√≥ria!
                </li>
              </ul>

              <hr />

              <h4>Fim de uma Rodada</h4>
              <p>
                A rodada termina quando o baralho se esgota ou 3 pilhas de
                fichas de produtos acabam.
              </p>
              <ul>
                <li>
                  <strong>Contagem de Pontos:</strong> Some o valor de todas as
                  suas fichas (de produtos e de b√¥nus).
                </li>
                <li>
                  <strong>B√¥nus do Maior Criador de Vacas:</strong> O jogador
                  com mais Vacas ganha uma ficha de b√¥nus de
                  <strong>5 pontos</strong>!
                </li>
              </ul>
              <p>
                Quem tiver mais pontos vence a rodada e ganha
                <strong>1 Selo de Excel√™ncia</strong>.
              </p>
            </div>
          </div>

          <div class="modal-buttons">
            <button id="btn-toggle-regras">Ver Regras Detalhadas</button>
            <button id="btn-fechar-regras">Fechar</button>
          </div>
        </div>
      </div>

      <div id="opponent-area" class="player-area">
        <div class="player-info">
          <h2 id="j2-nome">Oponente</h2>
          <div class="stats">
            <p>Fichas: <span id="j2-fichas">0</span></p>
            <p>Vacas: <span id="j2-vacas">0</span></p>
            <p>Selos: <span id="j2-selos">0</span></p>
          </div>
        </div>
        <div id="j2-mao" class="hand"></div>
      </div>

      <div id="central-area">
        <div id="mercado" class="card-area">
          <h3>Mercado</h3>
          <div id="mercado-cartas" class="hand"></div>
        </div>
      </div>

      <div id="player-area" class="player-area">
        <div id="j1-mao" class="hand"></div>
        <div class="player-info">
          <h2 id="j1-nome">Voc√™</h2>
          <div class="stats">
            <p>Fichas: <span id="j1-fichas">0</span></p>
            <p>Vacas: <span id="j1-vacas">0</span></p>
            <p>Selos: <span id="j1-selos">0</span></p>
          </div>
        </div>
      </div>

      <div id="action-panel">
        <div id="notification-area">
          <p id="notification-text">Bem-vindo ao Tropeiro! √â a sua vez.</p>
          <p id="trade-indicator"></p>
        </div>
        <div id="action-buttons">
          <button id="btn-vender">Vender</button>
          <button id="btn-trocar">Trocar</button>
          <button id="btn-pegar-vacas">Pegar Vacas</button>
        </div>
      </div>
      <div id="info-valores" class="card-area">
        <h3>Valores de Refer√™ncia</h3>
        <div id="tabela-valores"></div>
      </div>
    </div>

    <div id="modal-fim-de-jogo" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <h2>Fim de Jogo!</h2>
        <p id="vencedor-final" class="vencedor-texto"></p>
        <h3>Resumo das Rodadas</h3>
        <div id="detalhes-rodadas"></div>
        <div class="modal-buttons">
          <button id="btn-jogar-novamente">Jogar Novamente</button>
        </div>
      </div>
    </div>

    <script src="src/js/game.js"></script>
    <script src="src/js/ia.js"></script>
    <script src="src/js/tutorial.js"></script>
    <script src="src/js/main.js"></script>

    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("/public/service-worker.js").then(
            (registration) => {
              console.log(
                "ServiceWorker registration successful with scope: ",
                registration.scope
              );
            },
            (err) => {
              console.log("ServiceWorker registration failed: ", err);
            }
          );
        });
      }
    </script>
  </body>
</html>
